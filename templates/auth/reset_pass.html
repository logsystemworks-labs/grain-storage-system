<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Redefinir senha — Log SystemWorks</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
</head>
<body>

<div class="card">

  <!-- Logo -->
  <div class="logo-wrap">
    <img src="{{ url_for('static', filename='images/logo-lsw.png') }}" alt="Log System Works">
    <span class="logo-name">Log SystemWorks</span>
  </div>

  <!-- Ícone -->
  <div style="margin-bottom: 16px;">
    <i class="bi bi-shield-lock" style="font-size: 2rem; color: #1a56db;"></i>
  </div>

  <h1 class="form-title">Nova senha</h1>
  <p class="form-sub">Digite e confirme sua nova senha abaixo.</p>

  <!-- Flash messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
      <div class="flash {{ category }}">
        <i class="bi bi-{{ 'check-circle' if category == 'success' else 'x-circle' }}"></i>
        {{ message }}
      </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <!-- Form -->
  <form method="POST"
        action="{{ url_for('auth.reset_pass', token=token) }}"
        style="width:100%;"
        novalidate>

    <!-- Nova senha -->
    <div class="field">
      <label for="password">Nova senha</label>
      <input type="password" id="password" name="password" placeholder="••••••••" required minlength="6">
      <button type="button" class="pw-toggle" onclick="togglePw('password', 'icon1')">
        <i class="bi bi-eye" id="icon1"></i>
      </button>
    </div>

    <!-- Confirmar senha -->
    <div class="field">
      <label for="confirm_password">Confirmar nova senha</label>
      <input type="password" id="confirm_password" name="confirm_password" placeholder="••••••••" required minlength="6">
      <button type="button" class="pw-toggle" onclick="togglePw('confirm_password', 'icon2')">
        <i class="bi bi-eye" id="icon2"></i>
      </button>
    </div>

    <!-- Erro de confirmação -->
    <p id="match-error" style="display:none; font-size:0.78rem; color:#b91c1c; margin-top:-8px; margin-bottom:12px;">
      <i class="bi bi-exclamation-circle"></i>
      As senhas não coincidem
    </p>

    <button type="submit" class="btn-login" id="btn-submit">Redefinir senha</button>

  </form>

  <!-- Voltar -->
  <div style="margin-top: 20px; text-align: center;">
    <a href="{{ url_for('auth.login') }}"
       style="font-size: 0.8rem; color: #6b7280; text-decoration: none; display: inline-flex; align-items: center; gap: 6px;">
      <i class="bi bi-arrow-left"></i>
      Voltar para o login
    </a>
  </div>

  <p class="footer-text">© 2026 Log System Works</p>

</div>

<script src="{{ url_for('static', filename='js/reset_password.js') }}"></script>
</body>
</html>